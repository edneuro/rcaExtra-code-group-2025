% function SplitMAxx( asFileName )% Splits conditions in a MAxxFix gMF data structure into first and% second halves in the time domain. Orignal gMF obtained from matfile% with name asFileName, enclosed in single quotes.% Saves new gMF in matfile with same name with "Split" appended.  % Thus, it's best to omit the ".mat" from the file name argument.% For example, SplitMAxx( 'Myfile' ) takes the data in Myfile.mat,% splits it, and saves it in a new file called MyfileSplit.mat.% Also, make sure that the current working directory of matlab is% the one that contains the matfile you are splitting.function SplitMAxx( asFileName )load( asFileName, 'gMF' );gMF1.FN = [];gMF1.PN = [];gMF1.MatFN = [];gMF1.MatPN = [];gMF1.nCh = [];gMF1.casCond = {};gMF1.casSess = {};gMF1.Data = {};gMF1.iCond1 = 0;gMF1.iCond2 = 0;gMF1.WavePlot = []; %axis handlesgMF1.SpecPlot = [];tN = length( gMF.Data{ 1 }.T );t1stRange = [ 1:( tN / 2 ) ]; % index into 1st half of data ranget2ndRange = [ ( tN / 2 + 1 ):tN ]; % 2nd halfgMF1.FN = gMF.FN;gMF1.PN = gMF.PN;gMF1.nCh = [ gMF.nCh gMF.nCh ]; % concatenate original onto itself for first and second halfgMF1.casCond = { gMF.casCond{:} gMF.casCond{:} }; % and again...tNConds = length( gMF1.casCond );for iCond = 1:(tNConds/2) % the first half of conditions...	gMF1.casCond{ iCond } = [ gMF1.casCond{ iCond } '_1st' ]; % label it	gMF1.Data{ iCond }.T = gMF.Data{ iCond }.T( t1stRange, :, : ); % 1st half of time sequence...	gMF1.Data{ iCond }.R = gMF.Data{ iCond }.R( t1stRange, :, : ); % response data	gMF1.Data{ iCond }.N = gMF.Data{ iCond }.R( t1stRange, :, : ); % normalized response dataendfor iCond = (tNConds/2+1):tNConds	gMF1.casCond{ iCond } = [ gMF1.casCond{ iCond } '_2nd' ];	gMF1.Data{ iCond }.T = gMF.Data{ iCond - tNConds/2 }.T( t1stRange, :, : ); % use same time sequence as 1st half of range	gMF1.Data{ iCond }.R = gMF.Data{ iCond - tNConds/2 }.R( t2ndRange, :, : );	gMF1.Data{ iCond }.N = gMF.Data{ iCond - tNConds/2 }.N( t2ndRange, :, : );endgMF = gMF1;save( [ asFileName 'Split' ], 'gMF' );